sudo: required
language: node_js
node_js:
  - 10
install:
  - npm install
script:
  - npm run test
  - npm run build
deploy:
  provider: firebase
  token:
    secure: uAhvqcZmgz4Hy1Qv+0IXKkaKT9V2rdz4x7OwYR2RRojy9RrZd8acgLovO/k43sSxbP3rTGfmRZXKOB3lsVBAHoFTCazEnoGKvag+1Mbv1tJTIpm8rCVVk59bTwXUTcC9aplNgUoNw9XHt6bQ0Hbs7g+/3qrw41a2UVHcmt/ufx/c2GPxa22zo9C9wjTMi2FDwoWz+p4/bpKoe6uTv9OH0XlxLFYTDmoR+RuAZ0PF1tusW3u5Ki/3b8+SlbBFL0v1F1Gjt/woOjjbkLjnG7HNvdkjgbnxk5HLY8zwhKNuFn6clXIkVRd2sS7LlMlgesyF1dtz2r0cU0e7xUQXfLQejzN+062FH9AkfL1s4r/+bYjZw9VzNSkg83XK09f/VdU0e/ZfoSETwmqqrT7M1Tn47yztbuH90x3V/KC8n9jLpVNOX3emNR0fI/Rs3WyRt5p4Sa3ZaHQQvt6PAL0QWkTkWt7jpzna1oRK7ae6jLEG1Z1GKEDuFp2+yWrgJhCL0RjEeEKjAuGMRCLm8juzveiO26ccbrDnynZ822VVKNOHK9wor+FlipvI4F/OANeIY065fCBnRwlzmjWExm9d+E9FPHRR2pSvq5aG1NazV52n+tkb8dPTWCZYL3bF7V7p5waHSgDvl/FPxYPm0Dp2CmMiVK0y76RRJU5a5bbPe+ISHjk=
# cache:
#   directories:
#     - "$HOME/google-cloud-sdk/"

# before_install:
#   - openssl aes-256-cbc -K $encrypted_4b0974dc0a55_key -iv $encrypted_4b0974dc0a55_iv -in ./keys/travis-service-account.json.enc -out ./keys/travis-service-account.json -d

# before_deploy:
#   - gcloud version || true
#   - if [ ! -d "$HOME/google-cloud-sdk/bin" ]; then rm -rf $HOME/google-cloud-sdk; export CLOUDSDK_CORE_DISABLE_PROMPTS=1; curl https://sdk.cloud.google.com | bash; fi
# # Add gcloud to $PATH
# - source /home/travis/google-cloud-sdk/path.bash.inc
# - gcloud version
# - gcloud auth activate-service-account --project=tekktekk-notes --key-file=./keys/travis-service-account.json
# - scripts/cleanup-gae-versions.sh

# deploy:
#   - provider: gae
#     project: tekktekk-notes
#     keyfile: ./keys/travis-service-account.json
#     config: "dispatch.yaml"
#     verbosity: debug
#     skip_cleanup: true
#     on: master

#   - provider: gae
#     project: tekktekk-notes
#     keyfile: ./keys/travis-service-account.json
#     config: "app.yaml"
#     verbosity: debug
#     skip_cleanup: true
#     on: master
